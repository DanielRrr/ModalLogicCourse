\documentclass[pdf,utf8,russian,aspectratio=169]{beamer}
\usepackage[T2A]{fontenc}
\usetheme{Copenhagen}
\usepackage{setspace}
\usepackage{amsmath}
\usepackage{pgfplots}
\usepackage[utf8]{inputenc}
\usepackage{tikz-cd}
\usepackage[all, 2cell]{xy}
\usepackage{amssymb}
\usepackage{verbatim}
\usepackage[all]{xy}
\usepackage{tikz}
\usepackage{bussproofs}
\usepackage{dsfont}
\usepackage{mathabx}
\usepackage{animate}
\usetikzlibrary{graphs}
\usetikzlibrary{arrows}
\usepackage{hyperref}
\usepackage[english,russian]{babel}
\usepackage{listings}
\usepackage{color}
\usepackage[all, 2cell]{xy}
\usepackage[all]{xy}
\usepackage{listings}
\usepackage{mathrsfs}
\newtheorem{defin}{Определение}
\newtheorem{theor}{Теорема}
\newtheorem{lem}{Лемма}
\newtheorem{col}{Следствие}
\title{Введение в модальную логику, \\ Лекция 2}
\author{Даня Рогозин \\ МГУ, Serokell}
\date{Computer Science Club}
\begin{document}

\maketitle

\begin{frame}
  \frametitle{На прошлой лекции мы}

  \begin{itemize}
    \item Определили модальный язык
    \item Ввели модели и шкалы Крипке
    \item Посмотрели на базовые операции над шкалами: порожденные подмодели/подшкалы и $p$-морфизмы
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Нормальная модальная логика}

  \begin{defin}
    Множество формул $\mathcal{L}$ называется нормальной модальной логикой, если:
    \begin{itemize}
      \item Все булевы тавтологии содержатся в $\mathcal{L}$
      \item В $\mathcal{L}$ содержится формула ${\bf A K}$ $\Box (p \to q) \to (\Box p \to \Box q)$
      \item $\mathcal{L}$ замкнуто относительно следующих правил:
        \begin{enumerate}
          \item [MP] $\phi \in \mathcal{L} \: \& \: \phi \to \psi \in \mathcal{L} \Rightarrow \psi$
          \item [Nec] $\phi \in \mathcal{L} \Rightarrow \Box \phi \in \mathcal{L}$
          \item [Sub] $\phi(p) \in \mathcal{L} \Rightarrow \phi [p := \psi]$, где $\phi \in \mathcal{L}$
        \end{enumerate}
    \end{itemize}
  \end{defin}
\end{frame}

\begin{frame}
  \frametitle{Теорема корректности}

  \begin{theor}
    Пусть $\mathcal{F} = \langle W, R \rangle$, тогда $Log(\mathcal{F})$ --- это нормальная модальная логика
  \end{theor}

Общезначимость тавтологий и замкнутность $Log(\mathcal{F})$ относительно ${\bf MP}$ очевидна.
Покажем, что в произвольной шкале общезначима формула ${A K}$

  \begin{proof}
    Пусть $\vartheta : \mathbb{V} \to 2^W$ --- это оценка и пусть
    $\mathcal{M} = \langle \mathcal{F}, \vartheta \rangle$ --- это модель на шкале $\mathcal{F}$. Предположим, что для
    для любого $w \in W$, если $\mathcal{M}, w \models \Box (p \to q)$ и $\mathcal{M}, w \models \Box p$.
    Тогда для любого $v \in R(w)$, $\mathcal{M}, v \models p \to q$ и $\mathcal{M}, v \models p$. Отсюда,
    $\mathcal{M}, v \models q$. Тогда и $\mathcal{M}, w \models \Box q$.
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Теорема корректности}

  \begin{theor}
    Пусть $\mathcal{F} = \langle W, R \rangle$, тогда $Log(\mathcal{F})$ --- это нормальная модальная логика
  \end{theor}

Покажем, $Log(\mathcal{F})$ замкнута относительно правила Nec.

\begin{proof}
  Пусть $\mathcal{F} \models \phi$. Тогда при любой оценке $\vartheta$ и при любой модели $\mathcal{M} = \langle \mathcal{F}, \vartheta \rangle$, для любого $x \in W$, $\mathcal{M}, x \models \phi$. Легко понять, что $\mathcal{M}, x \models \Box \phi$.
\end{proof}
\end{frame}

\begin{frame}
  \frametitle{Теорема корректности}

  \begin{theor}
    Пусть $\mathcal{F} = \langle W, R \rangle$, тогда $Log(\mathcal{F})$ --- это нормальная модальная логика
  \end{theor}

Покажем, $Log(\mathcal{F})$ замкнута относительно правила Sub. Для этого введем оценку формулы $|| \phi ||_{\mathcal{M}} = \{ x \in W \: | \: \mathcal{M}, x \models \phi \}$, где $\mathcal{M}$ --- это модель.

\begin{proof}
  Пусть $\mathcal{F} \models \phi(p)$, $\phi$ --- это модальная формула и $\mathcal{M} = \langle \mathcal{F}, \vartheta \rangle$ --- модель.
  Посмотрим модель $\mathcal{M}^{'} = \langle \mathcal{F}, \vartheta' \rangle$, такую что $\vartheta'(p) = ||\psi||_{\mathcal{M}}$. Несложной индукцией по $\phi$ можно установить следующую эквивалентность:

    $\mathcal{M}, x \models \phi [x := \psi] \Leftrightarrow \mathcal{M}', x \models \phi(p)$
\end{proof}
\end{frame}

\begin{frame}
  \frametitle{Минимальная нормальная модальная логика}

  \begin{defin}
    Минимальная нормальная модальная логика ${\bf K}$ задается следующими аксиомами и правилами вывода

  \begin{enumerate}
    \item Аксиомы классической логики высказываний (см. любой учебник по математической логике)
    \item Аксиома нормальности (или аксиома Крипке) $\Box (p \to q) \to (\Box p \to \Box q)$
    \item Правила вывода:

    \begin{minipage}{0.225\textwidth}
    \begin{prooftree}
      \AxiomC{$\phi$}
      \AxiomC{$\phi \to \psi$}
      \RightLabel{{\bf MP}}
      \BinaryInfC{$\psi$}
    \end{prooftree}
    \end{minipage}\hfill
    \begin{minipage}{0.3\textwidth}
      \begin{prooftree}
        \AxiomC{$\phi$}
        \RightLabel{{\bf Nec}}
        \UnaryInfC{$\Box \phi$}
      \end{prooftree}
    \end{minipage}\hfill
    \begin{minipage}{0.33\textwidth}
        \begin{prooftree}
          \AxiomC{$\phi(p)$}
          \RightLabel{{\bf Sub}}
          \UnaryInfC{$\phi [p := \psi]$}
        \end{prooftree}
    \end{minipage}
  \end{enumerate}
  \end{defin}

  \emph{Выводом} в минимальной нормальной модальной логике ${\bf K}$ называется конечная последовательность формул, каждая из которых либо аксиома, либо получена из предыдущих формул по правилам ${\bf MP}$, ${\bf Nec}$, ${\bf Sub}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.

$ $

  $\begin{array}{lll}
  (1) & (p \land q) \to p, (p \land q) \to q & \\
  & \:\:\:\: \text{Аксиомы классической логики высказываний}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.

$ $

  $\begin{array}{lll}
  (1) & (p \land q) \to p, (p \land q) \to q & \\
  & \:\:\:\: \text{Аксиомы классической логики высказываний}& \\
  (2) & \Box ((p \land q) \to p), \Box ((p \land q) \to q) & \\
  & \:\:\:\: \text{Применение правила {\bf Nec} к обеим формулам из (1)}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.

$ $

  $\begin{array}{lll}
  (1) & (p \land q) \to p, (p \land q) \to q & \\
  & \:\:\:\: \text{Аксиомы классической логики высказываний}& \\
  (2) & \Box ((p \land q) \to p), \Box ((p \land q) \to q) & \\
  & \:\:\:\: \text{Применение правила {\bf Nec} к обеим формулам из (1)}& \\
  (3) & \Box((p \land q) \to p) \to (\Box (p \land q) \to \Box p), \: \Box((p \land q) \to q) \to (\Box (p \land q) \to \Box q)& \\
  & \:\:\:\: \text{Частные случаи аксиомы нормальности, полученные по {\bf Sub}}& \\
  \end{array}$
\end{frame}


\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.

$ $

  $\begin{array}{lll}
  (1) & (p \land q) \to p, (p \land q) \to q & \\
  & \:\:\:\: \text{Аксиомы классической логики высказываний}& \\
  (2) & \Box ((p \land q) \to p), \Box ((p \land q) \to q) & \\
  & \:\:\:\: \text{Применение правила {\bf Nec} к обеим формулам из (1)}& \\
  (3) & \Box((p \land q) \to p) \to (\Box (p \land q) \to \Box p), \: \Box((p \land q) \to q) \to (\Box (p \land q) \to \Box q)& \\
  & \:\:\:\: \text{Частные случаи аксиомы нормальности, полученные по {\bf Sub}}& \\
  (4) & \Box(p \land q) \to \Box p, \Box (p \land q) \to \Box q& \\
  & \:\:\:\: \text{(2), (3), {\bf MP}}& \\
  \end{array}$
\end{frame}


\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.

$ $

  $\begin{array}{lll}
  (1) & (p \land q) \to p, (p \land q) \to q & \\
  & \:\:\:\: \text{Аксиомы классической логики высказываний}& \\
  (2) & \Box ((p \land q) \to p), \Box ((p \land q) \to q) & \\
  & \:\:\:\: \text{Применение правила {\bf Nec} к обеим формулам из (1)}& \\
  (3) & \Box((p \land q) \to p) \to (\Box (p \land q) \to \Box p), \: \Box((p \land q) \to q) \to (\Box (p \land q) \to \Box q)& \\
  & \:\:\:\: \text{Частные случаи аксиомы нормальности, полученные по {\bf Sub}}& \\
  (4) & \Box(p \land q) \to \Box p, \Box (p \land q) \to \Box q& \\
  & \:\:\:\: \text{(2), (3), {\bf MP}}& \\
  (5) & (\Box(p \land q) \to \Box p) \to ((\Box (p \land q) \to \Box q) \to (\Box(p \land q) \to (\Box p \land \Box q))) & \\
  & \:\:\:\: \text{Булева тавтология}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем импликацию слева направо.

$ $

  $\begin{array}{lll}
  (1) & (p \land q) \to p, (p \land q) \to q & \\
  & \:\:\:\: \text{Аксиомы классической логики высказываний}& \\
  (2) & \Box ((p \land q) \to p), \Box ((p \land q) \to q) & \\
  & \:\:\:\: \text{Применение правила {\bf Nec} к обеим формулам из (1)}& \\
  (3) & \Box((p \land q) \to p) \to (\Box (p \land q) \to \Box p), \: \Box((p \land q) \to q) \to (\Box (p \land q) \to \Box q)& \\
  & \:\:\:\: \text{Частные случаи аксиомы нормальности, полученные по {\bf Sub}}& \\
  (4) & \Box(p \land q) \to \Box p, \Box (p \land q) \to \Box q& \\
  & \:\:\:\: \text{(2), (3), {\bf MP}}& \\
  (5) & (\Box(p \land q) \to \Box p) \to ((\Box (p \land q) \to \Box q) \to (\Box(p \land q) \to (\Box p \land \Box q))) & \\
  & \:\:\:\: \text{Булева тавтология}& \\
  (6) & \Box(p \land q) \to (\Box p \land \Box q) & \\
  & \:\:\:\: \text{(4), (5), {\bf MP}}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем обратную.
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем обратную.

  $ $

  $\begin{array}{lll}
  (1) & p \to (q \to (p \land q))& \\
  & \:\:\:\: \text{Аксиома классической логики высказываний}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем обратную.

  $ $

  $\begin{array}{lll}
  (1) & p \to (q \to (p \land q))& \\
  & \:\:\:\: \text{Аксиома классической логики высказываний}& \\
  (2) & \Box(p \to (q \to (p \land q)))& \\
  & \:\:\:\: \text{(1), {\bf Nec}}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем обратную.

  $ $

  $\begin{array}{lll}
  (1) & p \to (q \to (p \land q))& \\
  & \:\:\:\: \text{Аксиома классической логики высказываний}& \\
  (2) & \Box(p \to (q \to (p \land q)))& \\
  & \:\:\:\: \text{(1), {\bf Nec}}& \\
  (3) & \Box p \to \Box (q \to (p \land q))& \\
  & \:\:\:\: \text{(2), аксиома нормальности, {\bf MP}}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем обратную.

  $ $

  $\begin{array}{lll}
  (1) & p \to (q \to (p \land q))& \\
  & \:\:\:\: \text{Аксиома классической логики высказываний}& \\
  (2) & \Box(p \to (q \to (p \land q)))& \\
  & \:\:\:\: \text{(1), {\bf Nec}}& \\
  (3) & \Box p \to \Box (q \to (p \land q))& \\
  & \:\:\:\: \text{(2), аксиома нормальности, {\bf MP}}& \\
  (4) & \Box p \to (\Box q \to \Box (p \land q))& \\
  & \:\:\:\: \text{(3), аксиома нормальности, {\bf MP}, транзитивность}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Пример вывода в {\bf K}}

  Покажем, что ${\bf K} \vdash \Box (p \land q) \leftrightarrow (\Box p \land \Box q)$. Докажем обратную.

  $ $

  $\begin{array}{lll}
  (1) & p \to (q \to (p \land q))& \\
  & \:\:\:\: \text{Аксиома классической логики высказываний}& \\
  (2) & \Box(p \to (q \to (p \land q)))& \\
  & \:\:\:\: \text{(1), {\bf Nec}}& \\
  (3) & \Box p \to \Box (q \to (p \land q))& \\
  & \:\:\:\: \text{(2), аксиома нормальности, {\bf MP}}& \\
  (4) & \Box p \to (\Box q \to \Box (p \land q))& \\
  & \:\:\:\: \text{(3), аксиома нормальности, {\bf MP}, транзитивность}& \\
  (5) & (\Box p \land \Box q) \to \Box (p \land q))& \\
  & \:\:\:\: \text{Частный случай булевой тавтологии, {\bf Sub}}& \\
  \end{array}$
\end{frame}

\begin{frame}
  \frametitle{Полнота по Крипке}

  \begin{defin}
    Нормальная модальная логика $\mathcal{L}$ полна по Крипке, если она является логикой некоторого класса шкал. То есть, существует класс $\mathcal{F}$, такой, что
    $\mathcal{L} = Log(\mathcal{F})$.
  \end{defin}

  Покажем, что логика ${\bf K}$ является логикой класса всех шкал:

  \begin{theorem}
    ${\bf K} = Log(\mathcal{F})$, где $\mathcal{F}$ --- это класс всех шкал Крипке.
  \end{theorem}
\end{frame}

\begin{frame}
  \frametitle{(Максимально) непротиворечивые множества}

  \begin{defin}
    Пусть $\mathcal{L}$ --- это нормальная модальная логика. Множество формул $\Gamma$ $\mathcal{L}$-противоречиво, если найдутся формулы
    $\phi_1, \dots, \phi_n \in \Gamma$, такие, что $\mathcal{L} \vdash \neg \bigwedge \limits_{i = 1}^n \phi_i$. В противном случае,
    $\Gamma$ $\mathcal{L}$-непротиворечиво.
  \end{defin}

  \begin{defin}
    Множество $\Gamma$ максимально непротиворечиво, если (следующие условия эквивалентны):
    \begin{enumerate}
      \item Для любого максимально непротиворечивого $\Sigma$, если $\Gamma \subseteq \Sigma$, то $\Gamma = \Sigma$.
      \item Для любой формулы $\phi$, либо $\phi \in \Gamma$, либо $\neg \phi \in \Gamma$
    \end{enumerate}
  \end{defin}
\end{frame}

\begin{frame}
  \frametitle{Лемма о пополнении непротиворечивого множества}

  \begin{lem}
    Пусть $\Gamma$ $\mathcal{L}$-непротиворечиво и $\phi$ --- это формула, тогда либо $\Gamma \cup \{ \phi \}$ $\mathcal{L}$-непротиворечиво,
    либо $\Gamma \cup \{ \neg \phi \}$ $\mathcal{L}$ $\mathcal{L}$-непротиворечиво.
  \end{lem}

  \begin{proof}
    Предположим, что оба множества $\mathcal{L}$-противоречивы. Тогда найдутся $\phi_1, \dots, \phi_n, \phi \in \Gamma \cup \{ \phi \}$ и
    $\psi_1, \dots, \psi_m, \neg \phi \in \Gamma \cup \{ \neg \phi \}$. Рассмотрим формулу
    $A = \bigwedge \limits_{i = 1}^n \phi_i \land \bigwedge \limits_{j = 1}^m \phi_j$. Тогда $\mathcal{L} \vdash \neg (A \land \phi)$ и
    $\mathcal{L} \vdash \neg (A \land \neg \phi)$. Тогда $\mathcal{L} \vdash \neg A$. Противоречие, так как $\Gamma$ непротиворечиво.
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Лемма Линденбаума}

  \begin{lem}
    Пусть $\Gamma$ $\mathcal{L}$-непротиворечиво, тогда найдется максимально непротиворечивое множество $\Sigma$, такое, что $\Gamma \subseteq \Sigma$.
  \end{lem}

  \begin{proof}
    Пусть $\phi_1, \phi_2, \dots$ все формулы. Определим индукцией cледующее семейство множеств:

    $\begin{cases} \Gamma_0 = \Gamma \\ \Gamma_{n + 1} = \Gamma_{n} \cup \{ \phi_{n}\}, \text{если $\Gamma_{n} \cup \{ \phi_{n}\}$ $\mathcal{L}$-непротиворечиво}
    \\ \Gamma_{n + 1} = \Gamma_{n} \cup \{ \neg \phi_{n}\}, \text{иначе} \end{cases}$.

    По лемме о пополнении, каждое $\Gamma_{n}$ $\mathcal{L}$-непротиворечиво. Положим $\Delta = \cup_{n = 0}^{\infty} \Gamma_n$.
    Для каждого $n$, либо $\phi_n \in \Gamma_{n + 1}$, либо $\neg \phi_n \in \Gamma_{n + 1}$, а значит, и в $\Delta$. Тогда $\Delta$ максимально и непротиворечиво.
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Лемма о максимально непротиворечивых множествах}

  \begin{lem}
    Пусть $\Gamma$ максимальное $\mathcal{L}$-непротиворечивое множество, тогда:
    \begin{itemize}
      \item $\mathcal{L} \subseteq \Gamma$
      \item $\neg \phi \in \Gamma \Leftrightarrow A \notin \Gamma$
      \item $\phi \land \psi \in \Gamma \Leftrightarrow \phi \in \Gamma \text{ и } \psi \in \Gamma$
      \item $\phi \lor \psi \in \Gamma \Leftrightarrow \phi \in \Gamma \text{ или } \psi \in \Gamma$
    \end{itemize}
  \end{lem}
    Разберем для примера пункт 3.
  \begin{proof}
    ($\Rightarrow$) Пусть $\phi \land \psi \in \Gamma$ и при этом $\phi \notin \Gamma$ и $\psi \notin \Gamma$. Тогда $\neg \phi \in \Gamma$ и $\neg \psi \in \Gamma$.
    Тогда $\Gamma$ противоречиво, ибо $\neg ((\neg \phi \land \neg \psi) \land (\phi \lor \psi)) \in \mathcal{L}$, будучи тавтологией.
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Лемма о максимально непротиворечивых множествах}

  \begin{lem}
    Пусть $\Gamma$ максимальное $\mathcal{L}$-непротиворечивое множество, тогда:
    \begin{itemize}
      \item $\mathcal{L} \subseteq \Gamma$
      \item $\neg \phi \in \Gamma \Leftrightarrow A \notin \Gamma$
      \item $\phi \land \psi \in \Gamma \Leftrightarrow \phi \in \Gamma \text{ и } \psi \in \Gamma$
      \item $\phi \lor \psi \in \Gamma \Leftrightarrow \phi \in \Gamma \text{ или } \psi \in \Gamma$
    \end{itemize}
  \end{lem}
    Разберем для примера пункт 3.
  \begin{proof}
    ($\Leftarrow$) Пусть $\phi \in \Gamma$ или $\psi \in \Gamma$, при этом $\phi \lor \psi \notin \Gamma$. Тогда $\neg (\phi \land \neg (\phi \lor \psi)) \in \mathcal{L}$,
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Каноническая шкала и каноническая модель}

  \begin{defin} Пусть $\mathcal{L}$ --- это нормальная модальная логика. Канонической шкалой логики $\mathcal{L}$ называется шкала
    $\mathcal{F}_{\mathcal{L}} = \langle W_{\mathcal{L}}, R_{\mathcal{L}}\rangle$, где
    \begin{itemize}
      \item $W_{\mathcal{L}}$ --- это множество всех максимальных $\mathcal{L}$-непротиворечивых множеств.
      \item $x R_{\mathcal{L}} y \Leftrightarrow_{def} \forall \phi \in x \:\: \phi \eqcirc \Box \psi \Rightarrow \psi \in y$
    \end{itemize}
  \end{defin}

  \begin{defin}
    Каноническая модель --- это модель $\mathcal{M}_{\mathcal{L}} = \langle \mathcal{F}_{\mathcal{L}}, \vartheta_{\mathcal{L}} \rangle$,
    где $\vartheta_{\mathcal{L}}$ --- это каноническая оценка, заданная как

    \begin{center}
      $\vartheta_{\mathcal{L}}(p) =_{def} \{ x \in W_{\mathcal{L}} \: | \: p \in W_{\mathcal{L}} \}$
    \end{center}
  \end{defin}
\end{frame}

\begin{frame}
  \frametitle{Лемма о канонической модели}
  \begin{lem}
    Для любого максимального $\mathcal{L}$-непротиворечивого $\Gamma$, $\mathcal{M}_{\mathcal{L}}, \Gamma \models A \Leftrightarrow A \in \Gamma$
  \end{lem}

Рассмотрим случай, когда $\phi \eqcirc \Box \psi$

  \begin{proof}
    $\begin{array}{lll}
    & \mathcal{M}_{\mathcal{L}}, \Gamma \models \Box \psi \Leftrightarrow & \\
    & \:\:\:\: \text{По определению}& \\
    & \forall \Delta \in W_{\mathcal{L}} \:\: \Gamma R_{\mathcal{L}} \Delta \Rightarrow \mathcal{M}_{\mathcal{L}}, \Delta \models \psi \Leftrightarrow & \\
    & \:\:\:\: \text{По предположению индукции}& \\
    & \forall \Delta \in W_{\mathcal{L}} \:\: \Gamma R_{\mathcal{L}} \Delta \Rightarrow \psi \in \Delta \Leftrightarrow & \\
    & \:\:\:\: \text{Это надо доказать}& \\
    & \Box \psi \in \Gamma&
    \end{array}$
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Лемма о канонической модели}
  \begin{lem}
    $\mathcal{M}_{\mathcal{L}}, \Gamma \models \phi \Leftrightarrow \phi \in \Gamma$
  \end{lem}

  Покажем, что $\forall \Delta \in W_{\mathcal{L}} \:\: \Gamma R_{\mathcal{L}} \Delta \Rightarrow \psi \in \Delta \Leftrightarrow \Box \psi \in \Gamma$

  \begin{proof}
    $(\Leftarrow)$ следует из определения $R_{\mathcal{L}}$. Покажем $(\Rightarrow)$.

    Пусть $\Box \psi \notin \Gamma$. Построим $\Theta$, такое, что $\Gamma R_{\mathcal{L}} \Theta$ и $\psi \notin \Theta$. Положим $\Theta = \{ \theta \: | \: \Box \theta \in \Gamma \} \cup \{ \neg \psi \}$. Предположим, $\Theta$ противоречиво.
    Тогда существуют $\theta_1, \dots, \theta_n, \neg \psi$, такие что $\neg (\land_{i=1}^{n} \theta_i \land \neg \psi) \in \mathcal{L}$. Тогда

  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{Лемма о канонической модели}
  \begin{lem}
    \begin{enumerate}
    \item $\mathcal{M}_{\mathcal{L}}, \Gamma \models \phi \Leftrightarrow \phi \in \Gamma$
    \item $\mathcal{M}_{\mathcal{L}} \models \phi \Leftrightarrow \phi \in \mathcal{L}$
  \end{enumerate}
  \end{lem}

  Покажем, что $\forall \Delta \in W_{\mathcal{L}} \:\: \Gamma R_{\mathcal{L}} \Delta \Rightarrow \psi \in \Delta \Leftrightarrow \Box \psi \in \Gamma$

  \begin{proof}
    $\begin{array}{lll}
    & \mathcal{L} \vdash \neg (\land_{i=1}^{n} \theta_i \land \neg \psi) & \\
    & \:\:\:\: \text{Эквивалентность из классической логики} & \\
    & \mathcal{L} \vdash \land_{i=1}^{n} \theta_i \to \psi & \\
    & \:\:\:\: \text{{\bf Nec} + {\bf MP} + \text{ пример вывода в ${\bf K}$}} & \\
    & \mathcal{L} \vdash \land_{i=1}^{n} \Box \theta_i \to \Box \psi & \\
    \end{array}$
  \end{proof}

  Ясно, что $\land_{i=1}^{n} \Box \theta_i \to \Box \psi \in \Gamma$ и $\land_{i=1}^{n} \Box \theta_i \in \Gamma$ по лемме о максимальных непротиворечивых
  множествах. Тогда $\Box \psi \in \Gamma$. Противоречие.
\end{frame}

\begin{frame}
  \frametitle{Полнота системы ${\bf K}$}

  \begin{col}
    $Log(\mathcal{F}_{\mathcal{L}}) \subseteq \mathcal{L}$
  \end{col}

  \begin{theor}
      ${\bf K} = Log(\mathcal{F})$, где $\mathcal{F}$ --- это класс всех шкал Крипке.
  \end{theor}

  \begin{proof} Рассмотрим следующую цепочку включений:

    ${\bf K} \subseteq Log(\mathcal{F}) \subseteq Log(\mathcal{F}_{\bf K}) \subseteq {\bf K}$

    Первое включение --- это теорема корректности; второе включение следует из определения логики класса шкал ;третье включение --- это следствие выше.
  \end{proof}
\end{frame}

\begin{frame}
  \frametitle{На следующей лекции мы}

  \begin{enumerate}
    \item Рассмотрим примеры модальных формул, охарактеризуем соответствующие им свойства шкал и опишем стандартный "зоопарк"
    модальных логик: системы ${\bf T}$, ${\bf K4}$, ${\bf S}4$, ${\bf S}5$, ${\bf D}$, ${\bf GL}$ и так далее.
    \item Дадим понятие канонической логики и рассмотрим примеры канонических логик.
    \item Обсудим подробнее логику Геделя-Леба ${\bf GL}$, ее связь с теорией доказательств, ее неканоничность и покажем, что она полна по Крипке.
  \end{enumerate}
\end{frame}

\end{document}
